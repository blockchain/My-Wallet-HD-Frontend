.modal-header.flex-column.bc-modal-header(data-preflight-tag="Request")
  i.ti-close.close-modal(ng-click="$close()")
  .flex-center
    h3
      i.mr-10.icon-receive
      span(translate="REQUEST" ng-hide="requestCreated")
      span(translate="REQUEST_CREATED" ng-show="requestCreated")
#receive.modal-body
  form.bc-form(role="form" name="requestForm" ng-hide="requestCreated" ng-submit="createPaymentRequest()" novalidate)
    fieldset
      .group.mb-20
        .item
          label
            span.colon(translate="COPY_AND_SHARE_ADDRESS.TITLE")
            helper-button(content="COPY_AND_SHARE_ADDRESS.HELPER")
          .flex-row
            span.f-16.bg-grey.ph-25.pv-10.width-100 {{ address() }}
            span.f-14.ph-25.pv-10.upper.pointer.white.bg-primary Copy
            span.f-14.ph-25.pv-10.upper.white.bg-success.hidden Copied!
      
      .group.mb-20
        .item
          .or-horizontal Or
        
      .group.inline.mb-25
        .item.width-100
          label.capitalize(translate="ENTER_AMOUNT:")
          .flex-center
            .flex-1.flex-center.border
              input.form-control.no-border(
                type="number"
                ng-model="state.amount"
                name="amountFiat"
                transform-currency="settings.currency"
                placeholder="0"
                min="1"
                max="2100000000000000"
                required
                autofocus)
              span.mhm {{ settings.currency.code }}
            i.ti-arrows-horizontal.h4.basic-grey.phm
            .flex-1.flex-center.border
              input.form-control.no-border(
                type="number"
                ng-model="state.amount"
                name="amount"
                transform-currency="settings.btcCurrency"
                placeholder="0"
                min="1"
                max="2100000000000000"
                required)
              span.mhm {{ settings.btcCurrency.code }}
      
      .group.mb-20(ng-show="numberOfActiveAccountsAndLegacyAddresses() > 1" ng-class="{'has-warning': state.to.isWatchOnly}")
        .item
          label(translate="RECEIVE_TO")
          ui-select(ng-model="state.to" ng-disabled="paymentRequest.amount > 0 || paymentRequest.label" tagging)
            ui-select-match(placeholder="{{::'SEARCH' | translate}}...")
              label-origin(origin="$select.selected")
            ui-select-choices(repeat="destination in destinations | filter: {label:$select.search} | limitTo:destinationLimit" group-by="'type'")
              span(in-view="$last && destination.type==='Imported Addresses' && increaseLimit()")
                label-origin(origin="::destination" highlight="$select.search")
          span.help-block(ng-show="state.to.isWatchOnly" translate="WATCH_ONLY_REQUEST_WARN")
        
      .group.mb-20
        .item
          label(translate="DESCRIPTION:")
          textarea(name="message" ng-model="state.label" rows="8" cols="80" placeholder="What's this transaction for?" required)
      
      .group.mb-10
        .item
          button.btn.button-primary.upper(ng-disabled="requestForm.$invalid || locked" translate="NEXT" type="submit")

  div(ng-show="requestCreated")
    p.f-14.mb-25(translate="Send the link below to your friend or contact (via email or other messaging service), and they will be able to send bitcoin directly to your wallet.")
    
    form.bc-form
      .group
        .item
          label(translate="Payment Request:")
    
    .bg-grey.pv-30.ph-60.flex-column.center
      span.received.f-28.mb-10.em-600 {{ format(fromSatoshi(state.amount || 0, settings.btcCurrency), settings.btcCurrency, true) }}
      span.received.f-20.em-300 {{ format(fromSatoshi(state.amount || 0, settings.currency), settings.currency, true) }}
      span.f-16.italic.em-300.mt-20.mbn(ng-show="state.label") For {{ state.label }}
    
    .bg-grey.pv-10.ph-30.center.border-top
      span.f-12(style="word-break: break-all;") {{ paymentRequestURL() }}
      
    button.btn.button-primary.full.upper.mt-20 Copy Link
    
    a.display-block.center.mt-20(ng-click="$close()") Close
  
