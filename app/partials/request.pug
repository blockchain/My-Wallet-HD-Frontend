.modal-header.flex-column.bc-modal-header(data-preflight-tag="Request")
  i.ti-close.close-modal(ng-click="$close()")
  .flex-center
    h3
      i.mr-10.icon-receive
      span(translate="REQUEST")
  //- div(ng-show="fields.to.type === 'Imported Addresses'")
#receive.fade.modal-body
  form.bc-form(role="form" name="requestForm" novalidate)
    fieldset
      .group.mb-25
        .item
          label
            span.colon(translate="COPY_AND_SHARE_ADDRESS.TITLE")
            helper-button(content="COPY_AND_SHARE_ADDRESS.HELPER")
          .flex-row
            span.f-16.bg-grey.ph-25.pv-10.width-100 {{ paymentRequestAddress() }}
            span.f-14.ph-25.pv-10.upper.pointer.white.bg-primary Copy
            span.f-14.ph-25.pv-10.upper.white.bg-success.hidden Copied!
      
      .group.mb-25
        .item
          .or-horizontal Or
        
      .group.inline.mb-25
        .item.width-100
          label.capitalize(translate="ENTER_AMOUNT:")
          .flex-center
            .flex-1.flex-center.border
              input.form-control.no-border(
                type="number"
                ng-model="fields.amount"
                name="amount"
                transform-currency="settings.btcCurrency"
                placeholder="0"
                min="1"
                max="2100000000000000"
                required
                autofocus)
              span.mhm {{ settings.btcCurrency.code }}
            i.ti-arrows-horizontal.h4.basic-grey.phm
            .flex-1.flex-center.border
              input.form-control.no-border(
                type="number"
                ng-model="fields.amount"
                name="amountFiat"
                transform-currency="settings.currency"
                placeholder="0"
                min="1"
                max="2100000000000000"
                required)
              span.mhm {{ settings.currency.code }}
      
      .group.mb-25(ng-show="numberOfActiveAccountsAndLegacyAddresses() > 1" ng-class="{'has-warning': fields.to.isWatchOnly}")
        .item
          label(translate="RECEIVE_TO")
          ui-select(ng-model="fields.to" ng-disabled="paymentRequest.amount > 0 || paymentRequest.label" tagging)
            ui-select-match(placeholder="{{::'SEARCH' | translate}}...")
              label-origin(origin="$select.selected")
            ui-select-choices(repeat="destination in destinations | filter: {label:$select.search} | limitTo:destinationLimit" group-by="'type'")
              span(in-view="$last && destination.type==='Imported Addresses' && increaseLimit()")
                label-origin(origin="::destination" highlight="$select.search")
          span.help-block(ng-show="fields.to.isWatchOnly" translate="WATCH_ONLY_REQUEST_WARN")
        
      .group.mb-25
        .item
          label(translate="DESCRIPTION:")
          textarea(name="message" id="message" rows="8" cols="80" style="width: 100%; height: 80px; border-radius: 0px; box-shadow: none; border: 1px solid #DDD; resize: none; padding: 12px 12px;" placeholder="What's this transaction for?")
      
      .group.mb-10
        .item
          button.btn.button-primary.upper(ng-disabled="requestForm.$invalid" translate="NEXT" type="submit")

    //- .column.flex-justify(ng-show="fields.to.index != undefined")
    //-   .form-group.row.pbm.flex-justify.flex-center.amount(ng-class="{'has-error': requestForm.amount.$error.isValidAmount && requestForm.amount.$touched}")
        //- label.mbn.pts.capitalize(translate="ENTER_AMOUNT:")
        //- .flex-row
        //-   .flex-center.flex-2.border-bottom
        //-     input.form-control.pln.pbn.no-border(
        //-       type="number"
        //-       ng-model="fields.amount"
        //-       name="amount"
        //-       transform-currency="settings.btcCurrency"
        //-       placeholder="0"
        //-       min="1"
        //-       max="2100000000000000"
        //-     )
        //-     span.lh1 {{ settings.btcCurrency.code }}
        //-   i.ti-arrows-horizontal.h4.border-grey.center.flex-1
        //-   .flex-center.border-bottom.flex-2
        //-     input.form-control.pln.pbn.no-border(
        //-       type="number"
        //-       ng-model="fields.amount"
        //-       name="amountFiat"
        //-       transform-currency="settings.currency"
        //-       placeholder="0"
        //-       min="1"
        //-       max="2100000000000000"
        //-     )
        //-     span.lh1 {{ settings.currency.code }}
      .form-group.row.pbm.flex-justify.flex-center.description(ng-class="{'has-error': !requestForm.label.$valid}")
        label.mbn.pts(translate="DESCRIPTION:")
        div
          .flex-center.border-bottom
            input.form-control.no-border.pln.pbn(
              type="text"
              ng-model="fields.label"
              name="label"
            )
            helper-button(ng-model="fields" content="REQUEST_BITCOIN_STEP2B" values="{walletLabel: fields.to.label}")
          span.help-block(ng-show="requestForm.label.$error.characters", translate="INVALID_CHARACTERS_FOR_LABEL")
          span.help-block(ng-show="requestForm.label.$error.gap", translate="LABEL_ERROR_BIP_44_GAP")

      .flex-center.flex-justify.pbl(ng-show="advanced && fields.to.index != undefined")
        span.ti-arrow-down.center

      .payment-url.flex-around.flex-row(ng-if="paymentRequestURL()")
        .flex-column.receive-address.flex-center(ng-class="{'max-width': advanced}"
                                                 uib-tooltip="{{'COPY_HELPER' | translate}}"
                                                 tooltip-append-to-body="true")
          h4.mbl(translate="COPY_AND_SHARE")
          span.flex-align-self-end.phs.pvs.pointer(ng-show="fields.amount || fields.label && advanced"
                                                   ng-class="{'bg-grey': showPaymentRequestURL}"
                                                   ng-click="showPaymentRequestURL = !showPaymentRequestURL")
            i.ti-link
          p.form-control-static.bitcoin-address
            img(src="img/spinner.gif", ng-hide="status.didInitializeHD")
            span(ng-show="status.didInitializeHD" single-click-select)
              button.clipboard.btn.button-default
              span(ng-hide="(fields.amount || fields.label) && showPaymentRequestURL") {{ paymentRequestAddress() }}
              span(ng-show="(fields.amount || fields.label) && showPaymentRequestURL") {{ paymentRequestURL() }}
        span.or.flex-center.mrl.mll(translate="OR")
        .receive-code.flex-column.flex-center.flex-around(uib-tooltip="{{'QR_HELPER' | translate}}"
                                              tooltip-trigger="mouseenter"
                                              tooltip-append-to-body="true")
          h4(translate="SCAN")
          p(ng-hide="status.didInitializeHD")
            img(src="img/spinner.gif")
          span(ng-show="status.didInitializeHD")
            qr(text="paymentRequestURL()", size=100, correction-level="'M'", image="true")
